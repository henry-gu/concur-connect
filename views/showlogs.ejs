<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Log Viewer" />
    <meta name="author" content="Henry Gu" />
    <title>Log Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .log-container {
            max-height: 400px;
            overflow-y: scroll;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .log-line {
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <h1>Log Viewer</h1>
    <div class="log-container" id="logContainer">
        <!-- Log messages will be displayed here -->
    </div>
    <script>
        // Function to fetch and update log content
        async function updateLog() {
            try {
                const response = await fetch('/fetchlogs');
                if (response.ok) {
                    const logData = await response.json();
                    const logContainer = document.getElementById('logContainer');
    
                    // Clear the existing log content
                    logContainer.innerHTML = '';
    
                    // Iterate through log messages and display each as a separate line
                    logData.forEach((logMessage) => {
                        const logLine = document.createElement('div');
                        logLine.classList.add('log-line');
                        logLine.textContent = logMessage;
                        logContainer.appendChild(logLine);
                    });
                } else {
                    console.error('Failed to fetch log data.');
                }
            } catch (error) {
                console.error('Error fetching log data:', error);
            }
        }
    
        // Initial log update
        updateLog();
    
        // Periodically refresh the log content every 5 seconds
        setInterval(updateLog, 5000);
    </script>
    

</body>

</html>
